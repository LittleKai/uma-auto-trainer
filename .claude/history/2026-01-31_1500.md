# Change Log: 2026-01-31 15:00 - 15:30

## Summary
1. Moved Event Choice Mode settings from Event Choice Tab into the Config Dialog
2. Added Uma Musume selection dialog with search functionality
3. Added Preset selection dialog with deck summary information

## Changes Made

### 1. Config Dialog - Event Choice Mode Integration
**File:** `gui/dialogs/config_dialog.py`
- Added Event Choice Mode section to Basic Settings tab
- Added variables: `auto_event_map_var`, `auto_first_choice_var`, `unknown_event_action_var`
- Added `_on_event_mode_change()` method to handle checkbox state
- Added loading from `bot_settings.json` in `load_current_values()`
- Added saving to `bot_settings.json` in `save_settings()`
- Added Event Choice Mode defaults in `reset_to_defaults()`
- Increased dialog height from 550px to 590px

### 2. Event Choice Tab - Mode Selection Removed
**File:** `gui/tabs/event_choice_tab.py`
- Removed `create_mode_selection()` method
- Removed call to `create_mode_selection()` in `create_content()`
- Removed `on_mode_change()` method
- Removed `update_action_dropdown_visibility()` method
- Removed `action_dropdown` variable initialization

### 3. Uma Musume Dialog (previously created)
**File:** `gui/dialogs/uma_musume_dialog.py`
- Dialog for selecting Uma Musume with search functionality
- Similar interface to SupportCardDialog
- Loads from `assets/event_map/uma_musume/` folder

### 4. Preset Dialog - New
**File:** `gui/dialogs/preset_dialog.py` (created)
- Dialog for selecting presets with deck summary information
- Shows all 20 presets with:
  - Preset number and editable name
  - Uma Musume name
  - Support cards summary (count by type, e.g., "2SPD, 1STA, 1PWR")
  - Stat caps summary
- Search functionality to filter by preset name or Uma Musume
- Current preset highlighted
- Double-click to select and close
- Name editing directly in the dialog (replaces PresetNameDialog)

### 5. Event Choice Tab - Preset Selection Updated
**File:** `gui/tabs/event_choice_tab.py`
- Replaced dropdown + edit button with clickable box
- Added `_open_preset_dialog()` method
- Renamed `_update_preset_dropdown_selection()` to `_update_preset_display()`
- Removed `_get_preset_names()` method (no longer needed)
- Removed `_on_preset_selected()` method (no longer needed)
- Removed `_edit_preset_name()` method (edit now in PresetDialog)
- Removed PresetNameDialog import

## Testing Notes
- Config Dialog now shows Event Choice Mode options
- Checkbox behavior: at least one mode must be selected
- Unknown Event Action dropdown disabled when Auto First Choice is enabled
- Settings saved to bot_settings.json under "event_choice" key
- Preset Dialog shows deck summary for each preset
- Preset names can be edited directly in the dialog

## Related Files
- `gui/dialogs/config_dialog.py` - Modified
- `gui/tabs/event_choice_tab.py` - Modified
- `gui/dialogs/uma_musume_dialog.py` - Created (previous session)
- `gui/dialogs/preset_dialog.py` - Created
- `bot_settings.json` - Event Choice Mode settings location
